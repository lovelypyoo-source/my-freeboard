<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>메인 페이지</title>
<style>
body { font-family: Arial, sans-serif; padding:20px; background:#f9f9f9; }
h1 { text-align:center; margin-bottom:20px; }
button { padding:10px 15px; margin:5px; border:none; border-radius:5px; cursor:pointer; }
#adminBtn { font-size:12px; display:block; margin:30px auto 0; color:#555; background:#eee; }
</style>
</head>
<body>
  <h1>자유게시판</h1>

  <textarea id="content" placeholder="내용을 입력하세요"></textarea><br>
  <input type="password" id="pw" maxlength="4" placeholder="비밀번호(4자리)"><br>
  <button onclick="savePost()">글쓰기</button>
  <button onclick="checkPwAndView()">조회</button>
  <button id="adminBtn" onclick="goAdmin()">관리자 페이지</button>

<script>
function savePost(){
  const content=document.getElementById("content").value.trim();
  const pw=document.getElementById("pw").value.trim();
  if(!content||pw.length!==4){
    alert("내용과 4자리 비밀번호를 입력하세요.");
    return;
  }
  let posts=JSON.parse(localStorage.getItem("posts")||"[]");
  posts.push({content, pw, views:0, comments:[]});
  localStorage.setItem("posts",JSON.stringify(posts));
  alert("저장되었습니다.");
  document.getElementById("content").value="";
  document.getElementById("pw").value="";
}

function checkPwAndView(){
  const inputPw=prompt("조회할 글의 비밀번호 4자리를 입력하세요:");
  if(!inputPw) return;
  let posts=JSON.parse(localStorage.getItem("posts")||"[]");
  const match=posts.some(p=>p.pw===inputPw);
  if(match){
    sessionStorage.setItem("viewPw",inputPw);
    window.location.href="view.html";
  }else{
    alert("해당 비밀번호의 글이 없습니다.");
  }
}

function goAdmin(){
  const input=prompt("관리자 비밀번호를 입력하세요:");
  if(input==="dobong09!"){
    sessionStorage.setItem("isAdmin","true");
    window.location.href="admin.html";
  }else{
    alert("비밀번호가 틀렸습니다.");
  }
}
</script>
</body>
</html>
