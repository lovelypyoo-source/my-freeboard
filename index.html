<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>게시판 메인</title>
<style>
body { font-family: Arial, sans-serif; background:#f9f9f9; padding:20px; }
h1 { text-align:center; }
.container { max-width:600px; margin:0 auto; }
textarea, input { width:100%; padding:10px; margin:5px 0; border-radius:5px; border:1px solid #ccc; }
button { padding:10px 15px; margin:5px; border:none; border-radius:5px; background:#007BFF; color:white; cursor:pointer; }
button:hover { background:#0056b3; }
.post { background:#fff; padding:15px; margin:20px auto; border-radius:10px; box-shadow:0 2px 5px rgba(0,0,0,0.1);}
</style>
</head>
<body>
  <h1>게시판 메인</h1>
  <div class="container">
    <h3>글쓰기</h3>
    <textarea id="content" placeholder="내용을 입력하세요"></textarea>
    <input type="password" id="pw" placeholder="비밀번호(4자리)" maxlength="4">
    <button onclick="savePost()">저장</button>

    <h3>메뉴</h3>
    <button onclick="goView()">내 글 조회</button>
    <button onclick="goAdmin()">관리자 페이지</button>
  </div>

<script>
let posts = JSON.parse(localStorage.getItem("posts")||"[]");

// 글 저장
function savePost(){
  const content=document.getElementById("content").value.trim();
  const pw=document.getElementById("pw").value.trim();

  if(content==="" || pw===""){ alert("내용과 비밀번호를 입력하세요."); return; }
  if(pw.length!==4){ alert("비밀번호는 4자리여야 합니다."); return; }

  const post={ content:content, pw:pw, views:0, comments:[] };
  posts.push(post);
  localStorage.setItem("posts",JSON.stringify(posts));
  alert("글이 저장되었습니다.");
  document.getElementById("content").value="";
  document.getElementById("pw").value="";
}

// 내 글 조회 (프롬프트만)
function goView(){
  const inputPw = prompt("본인 글 비밀번호(4자리)를 입력하세요:");
  if(!inputPw) return;
  if(inputPw.length!==4){ alert("비밀번호는 4자리입니다."); return; }

  const myPosts = posts.filter(p=>p.pw===inputPw);
  if(myPosts.length===0){ alert("해당 비밀번호로 작성된 글이 없습니다."); return; }

  sessionStorage.setItem("viewPw", inputPw);
  window.location.href="view.html";
}

// 관리자 페이지 이동
function goAdmin(){
  const inputPw = prompt("관리자 비밀번호를 입력하세요:");
  if(inputPw==="dobong09!"){
    window.location.href="admin.html";
  }else{
    alert("비밀번호가 틀렸습니다.");
  }
}
/* 관리자 버튼 크기 절반 */
.admin-link button { 
  font-size:28px; 
  padding:15px 30px; 
  min-width:180px; 
}

footer { margin-top:120px; }

/* 모바일 최적화 */
@media (max-width:768px) {
  header h1 { font-size:36px; }
  header img { height:60px; }
  .speech-bubble { font-size:28px; padding:45px; }
  .buttons button { font-size:24px; padding:16px 32px; width:45%; }
  .main-image { max-width:90%; margin-top:15px; }
  .post { font-size:20px; padding:24px; }
  .post button { font-size:18px; padding:10px 20px; }
  .comments { font-size:18px; padding-left:15px; }
  .comment-form input { font-size:18px; padding:12px; }
  .comment-form button { font-size:18px; padding:10px 20px; }
  #forms textarea { width:100%; height:250px; font-size:18px; padding:12px; }
  #forms input[type="password"] { font-size:18px; padding:10px; width:100%; }
  #forms button { font-size:18px; padding:12px 25px; }
}

/* PC textarea 10줄 이상 보이도록 확대 */
@media (min-width:769px) {
  #forms textarea { width:100%; height:500px; font-size:40px; padding:20px; }
  #forms input[type="password"] { font-size:40px; padding:20px; width:100%; }
  #forms button { font-size:40px; padding:30px 60px; }
}
</style>
</head>
<body>
<header>
  <h1>나의 게시판</h1>
  <img src="그림1.png" alt="그림1">
</header>

<div class="main-box">
  <div class="speech-bubble">어떤 건의사항이 있으신가요?</div>
  <div class="buttons">
    <button onclick="showWriteForm()">글쓰기</button>
    <button onclick="showViewPwForm()">조회</button>
  </div>
  <img src="그림2.png" alt="그림2" class="main-image">
</div>

<div id="forms"></div>
<div id="posts"></div>

<div class="admin-link" id="adminLink" style="display:none;">
  <button onclick="toggleAdminLogin()">관리자 페이지</button>
  <div id="adminLoginForm" style="margin-top:20px; display:none;">
    <input type="password" id="adminPw" placeholder="관리자 비밀번호 입력" style="font-size:24px; padding:10px; width:250px;">
    <button onclick="checkAdminLogin()" style="font-size:24px; padding:10px 20px;">확인</button>
  </div>
</div>

<footer>
  <p style="color:#888; font-size:36px;">Powered by 나의 게시판</p>
</footer>

<script>
let posts = JSON.parse(localStorage.getItem("posts") || "[]");

// 글쓰기
function showWriteForm(){
  document.getElementById("forms").innerHTML=`
    <h3>글쓰기</h3>
    <textarea id="content" placeholder="내용을 입력하세요"></textarea><br>
    <input type="password" id="pw" placeholder="비밀번호(4자리)" maxlength="4"><br>
    <button onclick="addPost()">입력완료</button>
  `;
}

function addPost(){
  const content = document.getElementById("content").value;
  const pw = document.getElementById("pw").value;
  if(!content||pw.length!==4){ alert("내용과 4자리 비밀번호를 입력하세요."); return; }
  posts.push({ id: Date.now(), content, pw, views:0, comments:[] });
  savePosts();
  alert("글이 등록되었습니다.");
  document.getElementById("forms").innerHTML="";
}

// 저장
function savePosts(){ localStorage.setItem("posts", JSON.stringify(posts)); }

// 관리자 버튼 PC에서만 노출
function checkDevice(){
  const ua = navigator.userAgent.toLowerCase();
  const isMobile = /android|iphone|ipad|ipod|mobile/i.test(ua);
  document.getElementById("adminLink").style.display = isMobile ? "none" : "block";
}

window.onload = checkDevice;

function toggleAdminLogin(){
  const form = document.getElementById("adminLoginForm");
  form.style.display = (form.style.display === "none") ? "block" : "none";
}

function checkAdminLogin(){
  const pw = document.getElementById("adminPw").value;
  if(pw === "dobong09!"){ 
    window.location.href="admin.html"; 
  } else { 
    alert("비밀번호가 틀렸습니다."); 
  }
}
</script>
</body>
</html>
