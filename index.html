<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>나의 게시판</title>
<style>
@font-face {
  font-family: 'KOROAD';
  src: url('KOROAD.ttf') format('truetype');
}
body {
  font-family: 'KOROAD', Arial, sans-serif;
  margin:0; padding:0;
  text-align:center; background:#f9f9f9;
}
header {
  display:flex; align-items:center; justify-content:center;
  background:#f5f5f5; padding:30px; flex-wrap:wrap;
}
header h1 { margin:0; font-size:48px; }
header img { margin-left:20px; height:80px; }
.main-box {
  margin:40px auto;
  display:flex; flex-direction:column; align-items:center; gap:30px;
  padding:0 50px; max-width:1200px;
}
.speech-bubble {
  position:relative; background:#fff; border:2px solid #ddd;
  border-radius:30px; padding:60px; font-size:36px; font-weight:bold;
  max-width:95%; box-shadow:2px 2px 16px rgba(0,0,0,0.1);
}
.speech-bubble::after {
  content:""; position:absolute; bottom:-40px; left:80px;
  border-width:40px 40px 0; border-style:solid; border-color:#fff transparent transparent transparent;
  filter:drop-shadow(2px 4px 4px rgba(0,0,0,0.1));
}
.buttons {
  display:flex; justify-content:center; gap:30px; flex-wrap:wrap; z-index:1;
}
button {
  font-size:28px; padding:20px 40px; border:none; border-radius:16px;
  background:#4CAF50; color:white; cursor:pointer; min-width:180px;
}
button:hover { background:#45a049; }
.main-image {
  max-width:40%; width:auto; height:auto; margin-top:20px;
}
.post { border:1px solid #ccc; padding:30px; margin:30px auto;
  width:95%; max-width:800px; text-align:left; border-radius:24px; background:#fafafa;
  font-size:24px; line-height:1.8;
}
.post button { font-size:20px; padding:12px 24px; margin-right:12px; margin-top:12px; }
.comments { margin-top:20px; padding-left:20px; border-left:4px solid #ccc; font-size:20px; }
.comments p { margin:8px 0; }
.comment-form { margin-top:20px; display:flex; flex-direction:column; gap:12px; }
.comment-form input { padding:16px; font-size:20px; width:100%; box-sizing:border-box; border-radius:8px; border:1px solid #ccc; }
.comment-form button { font-size:20px; padding:12px 24px; background-color:#2196F3; }
.admin-link { margin-top:30px; }
footer { margin-top:60px; }

/* 모바일 최적화 */
@media (max-width:768px) {
  header h1 { font-size:36px; }
  header img { height:60px; }
  .speech-bubble { font-size:28px; padding:45px; }
  .buttons button { font-size:24px; padding:16px 32px; width:45%; }
  .main-image { max-width:90%; margin-top:15px; }
  .post { font-size:20px; padding:24px; }
  .post button { font-size:18px; padding:10px 20px; }
  .comments { font-size:18px; padding-left:15px; }
  .comment-form input { font-size:18px; padding:12px; }
  .comment-form button { font-size:18px; padding:10px 20px; }
  #forms textarea { width:100%; height:250px; font-size:18px; padding:12px; }
  #forms input[type="password"] { font-size:18px; padding:10px; width:100%; }
  #forms button { font-size:18px; padding:12px 25px; }
}

/* PC에서 textarea 크게 */
@media (min-width:769px) {
  #forms textarea { width:100%; height:300px; font-size:20px; padding:15px; }
  #forms input[type="password"] { font-size:20px; padding:12px; width:100%; }
  #forms button { font-size:20px; padding:15px 30px; }
}
</style>
</head>
<body>
<header>
  <h1>나의 게시판</h1>
  <img src="그림1.png" alt="그림1">
</header>

<div class="main-box">
  <div class="speech-bubble">어떤 건의사항이 있으신가요?</div>
  <div class="buttons">
    <button onclick="showWriteForm()">글쓰기</button>
    <button onclick="showViewForm()">조회</button>
  </div>
  <img src="그림2.png" alt="그림2" class="main-image">
</div>

<div id="forms"></div>
<div id="posts"></div>

<div class="admin-link" id="adminLink" style="display:none;">
  <button onclick="goAdmin()">관리자 페이지</button>
</div>

<footer>
  <p style="color:#888; font-size:18px;">Powered by 나의 게시판</p>
</footer>

<script>
let posts = JSON.parse(localStorage.getItem("posts") || "[]");

function savePosts(){ localStorage.setItem("posts",JSON.stringify(posts)); }

function showWriteForm(){
  document.getElementById("forms").innerHTML=`
    <h3>글쓰기</h3>
    <textarea id="content" placeholder="내용을 입력하세요"></textarea><br>
    <input type="password" id="pw" placeholder="비밀번호(4자리)" maxlength="4"><br>
    <button onclick="addPost()">입력완료</button>
  `;
}

function addPost(){
  const content=document.getElementById("content").value;
  const pw=document.getElementById("pw").value;
  if(!content||pw.length!==4){ alert("내용과 4자리 비밀번호를 입력하세요."); return; }
  posts.push({content,pw,views:0,comments:[]});
  savePosts();
  alert("글이 등록되었습니다.");
  document.getElementById("forms").innerHTML="";
}

function showViewForm(){
  document.getElementById("forms").innerHTML=`
    <h3>글 조회</h3>
    <input type="password" id="checkPw" placeholder="비밀번호 4자리" maxlength="4">
    <button onclick="viewPost()">조회하기</button>
  `;
}

function viewPost(){
  const pw=document.getElementById("checkPw").value;
  const post=posts.find(p=>p.pw===pw);
  if(!post){ alert("비밀번호가 일치하는 글이 없습니다."); return; }
  post.views++;
  savePosts();
  displayPost(post);
}

function displayPost(post){
  document.getElementById("posts").innerHTML=`
    <div class="post" id="post_${post.pw}">
      <p>${post.content}</p>
      <p>조회수: ${post.views}</p>
      <button onclick="editPost('${post.pw}')">수정</button>
      <button onclick="confirmPost('${post.pw}')">확인</button>
      <div class="comments">
        <h4>댓글</h4>
        ${post.comments.map(c=>`<p>- ${c}</p>`).join("")}
      </div>
      <div class="comment-form">
        <input type="text" id="commentInput_${post.pw}" placeholder="댓글을 입력하세요">
        <button onclick="addComment('${post.pw}')">댓글 등록</button>
      </div>
    </div>
  `;
}

function editPost(pw){
  const post=posts.find(p=>p.pw===pw);
  if(!post) return;
  document.getElementById("posts").innerHTML=`
    <textarea id="editContent">${post.content}</textarea><br>
    <button onclick="saveEdit('${pw}')">저장</button>
  `;
}

function saveEdit(pw){
  const post=posts.find(p=>p.pw===pw);
  if(!post) return;
  post.content=document.getElementById("editContent").value;
  savePosts();
  alert("수정되었습니다.");
  displayPost(post);
}

function confirmPost(pw){ alert("조회 확인!"); }

function addComment(pw){
  const input=document.getElementById(`commentInput_${pw}`);
  const post=posts.find(p=>p.pw===pw);
  if(!post||!input.value.trim()) return;
  post.comments.push(input.value.trim());
  savePosts();
  input.value="";
  displayPost(post);
}

function checkDevice(){
  const ua=navigator.userAgent.toLowerCase();
  const isMobile=/android|iphone|ipad|ipod|mobile/i.test(ua);
  document.getElementById("adminLink").style.display=isMobile?"none":"block";
}
window.onload=checkDevice;

function goAdmin(){ window.location.href="admin.html"; }
</script>
</body>
</html>
