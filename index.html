<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>자유게시판</title>
  <script src="config.js"></script>
  <style>
    body { font-family: Arial,sans-serif; text-align:center; padding:50px; background:#f4f4f4; }
    h1 { margin-bottom:30px; }
    button {
      padding:12px 20px;
      font-size:16px;
      border:none;
      border-radius:8px;
      cursor:pointer;
      background:#4CAF50;
      color:#fff;
    }
    button:hover { background:#45a049; }
  </style>
</head>
<body>
  <h1>자유게시판 메인 페이지</h1>
  <button onclick="goAdmin()">관리자 페이지</button>

  <script>
    // SHA-256 해시 함수
    async function sha256(message) {
      const msgBuffer = new TextEncoder().encode(message);
      const hashBuffer = await crypto.subtle.digest("SHA-256", msgBuffer);
      const hashArray = Array.from(new Uint8Array(hashBuffer));
      return hashArray.map(b => b.toString(16).padStart(2, "0")).join("");
    }

    async function goAdmin() {
      const password = prompt("관리자 비밀번호를 입력하세요:");
      if (password === null) return;

      const hash = await sha256(password);

      if (hash === ADMIN_PASSWORD_HASH) {
        sessionStorage.setItem("adminAuth", "true"); // 관리자 인증 저장
        window.location.href = "admin.html";
      } else {
        alert("비밀번호가 일치하지 않습니다.");
      }
    }
  </script>
</body>
</html>
