<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>관리자 페이지</title>
<style>
body { font-family: Arial,sans-serif; padding:20px; background:#f9f9f9; }
h1 { text-align:center; margin-bottom:30px; }

/* 기본 테이블 스타일 */
table { width:100%; border-collapse: collapse; }
th, td { border:1px solid #ccc; padding:10px; text-align:left; vertical-align:top; }
th { background:#f0f0f0; font-size:16px; }
td textarea { width:100%; height:120px; font-size:16px; }
td input[type=text] { width:80%; padding:5px; font-size:14px; }
td button { padding:6px 12px; font-size:14px; margin:2px; cursor:pointer; }
.comments { margin-top:5px; padding-left:10px; border-left:2px solid #ccc; }
.comments p { margin:2px 0; }

/* 모바일 최적화 */
@media (max-width:768px) {
  table, thead, tbody, th, td, tr {
    display:block;
    width:100%;
  }
  thead tr { display:none; } /* 헤더 숨김 */
  td { border:none; border-bottom:1px solid #ccc; padding:10px 0; }
  td textarea { height:150px; font-size:16px; }
  td input[type=text] { width:100%; font-size:16px; padding:10px; }
  td button { width:48%; font-size:16px; padding:12px; margin:5px 1%; }
  .comments { border-left:none; margin-top:10px; padding-left:0; }
}

/* 카드 형태 */
.post-card { background:#fff; padding:15px; margin-bottom:20px; border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
.post-card h2 { font-size:18px; margin-bottom:10px; }
.post-card textarea { width:100%; margin-bottom:10px; }
.post-card .comments input { margin-top:5px; margin-bottom:5px; }
</style>
</head>
<body>
<h1>관리자 페이지 - 전체 게시판</h1>

<div id="postsContainer"></div>

<script>
// 로컬스토리지에서 글 가져오기
let posts = JSON.parse(localStorage.getItem("posts") || "[]");

// 게시판 렌더링
function renderPosts() {
  const container = document.getElementById("postsContainer");
  container.innerHTML = "";

  posts.forEach((p,index)=>{
    const div = document.createElement("div");
    div.className = "post-card";
    div.innerHTML = `
      <h2>글 번호 ${index+1}</h2>
      <textarea id="editContent_${p.id}">${p.content}</textarea>
      <p>조회수: ${p.views}</p>
      <div class="comments">
        <h4>댓글</h4>
        ${p.comments.map(c=>`<p>- ${c}</p>`).join('')}
        <input type="text" id="commentInput_${p.id}" placeholder="댓글 작성">
        <button onclick="addComment('${p.id}')">댓글 등록</button>
      </div>
      <button onclick="savePost('${p.id}')">저장</button>
      <button onclick="deletePost('${p.id}')">삭제</button>
    `;
    container.appendChild(div);
  });
}

// 댓글 등록
function addComment(id){
  const input=document.getElementById(`commentInput_${id}`);
  const post=posts.find(p=>p.id==id);
  if(!post || !input.value.trim()) return;
  post.comments.push(input.value.trim());
  savePosts();
  input.value="";
  renderPosts();
}

// 글 저장
function savePost(id){
  const post=posts.find(p=>p.id==id);
  post.content=document.getElementById(`editContent_${id}`).value;
  savePosts();
  alert("저장 완료");
  renderPosts();
}

// 글 삭제
function deletePost(id){
  if(!confirm("삭제하시겠습니까?")) return;
  posts = posts.filter(p=>p.id!=id);
  savePosts();
  renderPosts();
}

// 로컬스토리지 저장
function savePosts(){ localStorage.setItem("posts",JSON.stringify(posts)); }

// 초기 렌더링
renderPosts();
</script>
</body>
</html>
