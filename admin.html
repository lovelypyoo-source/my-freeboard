<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>관리자 페이지</title>
<style>
body { font-family: Arial,sans-serif; padding:20px; }
h1 { text-align:center; }
.post{border:1px solid #ccc;padding:20px;margin:15px 0;font-size:18px;}
textarea{width:100%;height:200px;font-size:18px;}
input[type=text]{padding:10px;font-size:16px;}
button{padding:10px 15px;font-size:16px;cursor:pointer;margin-top:5px;}
.comment-form{margin-top:10px;display:flex;gap:5px;}
.comment-form input{flex:1;padding:10px;font-size:16px;}
</style>
</head>
<body>
<h1>관리자 페이지</h1>
<div id="posts"></div>

<script>
let posts = JSON.parse(localStorage.getItem("posts") || "[]");

// 렌더링
function renderPosts(){
  const postsDiv = document.getElementById("posts");
  postsDiv.innerHTML = "";
  posts.forEach(p=>{
    const div = document.createElement("div");
    div.className="post";
    div.innerHTML=`
      <textarea id="editContent_${p.id}">${p.content}</textarea>
      <p>조회수: ${p.views}</p>
      <div class="comments">
        <h4>댓글</h4>
        ${p.comments.map(c=>`<p>- ${c}</p>`).join("")}
      </div>
      <div class="comment-form">
        <input type="text" id="commentInput_${p.id}" placeholder="댓글 작성">
        <button onclick="addComment('${p.id}')">댓글 등록</button>
      </div>
      <button onclick="savePost('${p.id}')">저장</button>
      <button onclick="deletePost('${p.id}')">삭제</button>
    `;
    postsDiv.appendChild(div);
  });
}

function addComment(id){
  const input = document.getElementById(`commentInput_${id}`);
  const post = posts.find(p=>p.id==id);
  if(!post || !input.value.trim()) return;
  post.comments.push(input.value.trim());
  savePosts();
  input.value="";
  renderPosts();
}

function savePost(id){
  const post = posts.find(p=>p.id==id);
  post.content = document.getElementById(`editContent_${id}`).value;
  savePosts();
  alert("저장 완료");
  renderPosts();
}

function deletePost(id){
  if(!confirm("삭제하시겠습니까?")) return;
  posts = posts.filter(p=>p.id!=id);
  savePosts();
  renderPosts();
}

function savePosts(){ localStorage.setItem("posts",JSON.stringify(posts)); }

renderPosts();
</script>
</body>
</html>
