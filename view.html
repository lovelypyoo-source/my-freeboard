<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>내 글 조회</title>
<style>
body { font-family: Arial, sans-serif; padding:20px; background:#f0f0f0; }
h1 { text-align:center; }
.post { background:#fff; padding:15px; margin:20px auto; border-radius:10px; max-width:600px; box-shadow:0 2px 5px rgba(0,0,0,0.1);}
.comments { margin-top:10px; padding-top:10px; border-top:1px solid #ddd; }
</style>
</head>
<body>
  <h1>내 글 조회</h1>
  <div id="viewForm">
    <h3>비밀번호 입력</h3>
    <input type="password" id="viewPw" placeholder="비밀번호(4자리)" maxlength="4">
    <button onclick="checkViewPw()">확인</button>
  </div>
  <div id="posts"></div>

<script>
let posts = JSON.parse(localStorage.getItem("posts")||"[]");

function checkViewPw(){
  const pw=document.getElementById("viewPw").value;
  if(pw.length!==4){ alert("4자리 비밀번호를 입력하세요."); return; }

  const myPosts=posts.filter(p=>p.pw===pw);

  if(myPosts.length===0){
    alert("해당 비밀번호로 작성된 글이 없습니다.");
    return;
  }

  const latestPost=myPosts[myPosts.length-1];
  renderSinglePost(latestPost);
}

function renderSinglePost(post){
  const postsDiv=document.getElementById("posts");
  postsDiv.innerHTML="";
  post.views++;
  const div=document.createElement("div");
  div.className="post";
  div.innerHTML=`
    <p>${post.content}</p>
    <p>조회수: ${post.views}</p>
    <div class="comments">
      <h4>댓글</h4>
      ${post.comments.map(c=>`<p>- ${c}</p>`).join("") || "<p>댓글 없음</p>"}
    </div>
  `;
  postsDiv.appendChild(div);
  localStorage.setItem("posts",JSON.stringify(posts));
}
</script>
</body>
</html>
