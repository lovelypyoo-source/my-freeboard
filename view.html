<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>내 글 보기</title>
<style>
body { font-family: Arial, sans-serif; background:#f9f9f9; padding:20px; }
h1 { text-align:center; }
.container { max-width:600px; margin:0 auto; }
.post { background:#fff; padding:15px; margin:20px auto; border-radius:10px; box-shadow:0 2px 5px rgba(0,0,0,0.1);}
</style>
</head>
<body>
  <h1>내 글 보기</h1>
  <div class="container" id="postArea"></div>
  <div style="text-align:center;">
    <button onclick="goMain()">메인으로</button>
  </div>

<script>
let posts = JSON.parse(localStorage.getItem("posts")||"[]");
let pw = sessionStorage.getItem("viewPw");

if(!pw){
  alert("잘못된 접근입니다.");
  window.location.href="index.html";
}

let myPosts = posts.filter(p=>p.pw===pw);

if(myPosts.length===0){
  document.getElementById("postArea").innerHTML="<p>조회할 글이 없습니다.</p>";
}else{
  let html="";
  myPosts.forEach((p,i)=>{
    p.views++;
    html+=`
      <div class="post">
        <p><b>내용:</b> ${p.content}</p>
        <p><b>조회수:</b> ${p.views}</p>
        <p><b>댓글:</b> ${p.comments.length===0?"없음":p.comments.join("<br>")}</p>
      </div>
    `;
  });
  document.getElementById("postArea").innerHTML=html;
  localStorage.setItem("posts",JSON.stringify(posts));
}

function goMain(){
  window.location.href="index.html";
}
</script>
</body>
</html>
