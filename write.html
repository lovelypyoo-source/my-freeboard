<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>글쓰기 - 자유게시판</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    input, textarea { display: block; margin: 10px 0; width: 100%; padding: 8px; }
    button { margin: 5px; padding: 10px; }
  </style>
</head>
<body>
  <h1>글쓰기</h1>
  <input id="title" type="text" placeholder="제목을 입력하세요">
  <textarea id="content" rows="10" placeholder="내용을 입력하세요"></textarea>
  <input id="password" type="password" maxlength="4" placeholder="4자리 비밀번호 입력">

  <button onclick="savePost()">입력완료</button>
  <button onclick="editPost()">수정</button>
  <button onclick="location.href='index.html'">돌아가기</button>

  <script>
    function savePost() {
      const title = document.getElementById("title").value;
      const content = document.getElementById("content").value;
      const password = document.getElementById("password").value;

      if (!title || !content || password.length !== 4) {
        alert("제목, 내용, 비밀번호(4자리)를 모두 입력하세요");
        return;
      }

      const post = {
        title, content, password,
        views: 0,
        comments: []
      };

      localStorage.setItem("post_" + password, JSON.stringify(post));
      alert("글이 저장되었습니다!");
      location.href = "index.html";
    }

    function editPost() {
      const password = prompt("수정할 글의 비밀번호 4자리를 입력하세요");
      if (!password) return;
      const post = JSON.parse(localStorage.getItem("post_" + password));
      if (!post) {
        alert("해당 비밀번호의 글이 없습니다.");
        return;
      }
      document.getElementById("title").value = post.title;
      document.getElementById("content").value = post.content;
      document.getElementById("password").value = password;
    }
  </script>
</body>
</html>
